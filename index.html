
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Introduction Â· iFlow Documents</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="docs/introduction/ConceptsPrinciples.html" />
    
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"repo":"unadlib/iflow","types":["star","fork"],"size":"small"};
    </script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter active" data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="docs/introduction/ConceptsPrinciples.html">
            
                <a href="docs/introduction/ConceptsPrinciples.html">
            
                    
                    Concepts Principles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="docs/introduction/Benefits.html">
            
                <a href="docs/introduction/Benefits.html">
            
                    
                    Benefits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3" data-path="docs/introduction/Examples.html">
            
                <a href="docs/introduction/Examples.html">
            
                    
                    Examples: Counter
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="docs/basics/">
            
                <a href="docs/basics/">
            
                    
                    Basics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="docs/basics/State.html">
            
                <a href="docs/basics/State.html">
            
                    
                    State
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="docs/basics/Action.html">
            
                <a href="docs/basics/Action.html">
            
                    
                    Action
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="docs/basics/Pipe.html">
            
                <a href="docs/basics/Pipe.html">
            
                    
                    Pipe
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="docs/basics/Store.html">
            
                <a href="docs/basics/Store.html">
            
                    
                    Store
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="docs/basics/Examples.html">
            
                <a href="docs/basics/Examples.html">
            
                    
                    Examples: TODO
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="docs/advanced/">
            
                <a href="docs/advanced/">
            
                    
                    Advanced
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="docs/advanced/Middleware.html">
            
                <a href="docs/advanced/Middleware.html">
            
                    
                    Middleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="docs/advanced/TimeTravel.html">
            
                <a href="docs/advanced/TimeTravel.html">
            
                    
                    Time Travel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="docs/advanced/Immutable.html">
            
                <a href="docs/advanced/Immutable.html">
            
                    
                    Immutable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="docs/advanced/CrossStore.html">
            
                <a href="docs/advanced/CrossStore.html">
            
                    
                    Cross Store
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="docs/advanced/BatchUpdate.html">
            
                <a href="docs/advanced/BatchUpdate.html">
            
                    
                    Batch Update
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="docs/advanced/AsyncAction.html">
            
                <a href="docs/advanced/AsyncAction.html">
            
                    
                    Async Action
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="docs/advanced/ForceUpdate.html">
            
                <a href="docs/advanced/ForceUpdate.html">
            
                    
                    Force Update
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="docs/advanced/Examples.html">
            
                <a href="docs/advanced/Examples.html">
            
                    
                    Examples: TODO With Undo/Redo
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="docs/api/">
            
                <a href="docs/api/">
            
                    
                    API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="docs/api/iFlow.html">
            
                <a href="docs/api/iFlow.html">
            
                    
                    iFlow
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="docs/api/create.html">
            
                <a href="docs/api/create.html">
            
                    
                    create
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="docs/api/middleware.html">
            
                <a href="docs/api/middleware.html">
            
                    
                    middleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3" data-path="docs/api/setInitializeValue.html">
            
                <a href="docs/api/setInitializeValue.html">
            
                    
                    setInitializeValue
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.4" data-path="docs/api/addInterceptor.html">
            
                <a href="docs/api/addInterceptor.html">
            
                    
                    addInterceptor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.5" data-path="docs/api/addMiddleware.html">
            
                <a href="docs/api/addMiddleware.html">
            
                    
                    addMiddleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.6" data-path="docs/api/addObserver.html">
            
                <a href="docs/api/addObserver.html">
            
                    
                    addObserver
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.7" data-path="docs/api/addListener.html">
            
                <a href="docs/api/addListener.html">
            
                    
                    addListener
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="docs/api/getImmutable.html">
            
                <a href="docs/api/getImmutable.html">
            
                    
                    getImmutable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="docs/api/listen.html">
            
                <a href="docs/api/listen.html">
            
                    
                    listen
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="docs/api/getStore.html">
            
                <a href="docs/api/getStore.html">
            
                    
                    getStore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="docs/api/getState.html">
            
                <a href="docs/api/getState.html">
            
                    
                    getState
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="docs/api/setState.html">
            
                <a href="docs/api/setState.html">
            
                    
                    setState
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="docs/api/update.html">
            
                <a href="docs/api/update.html">
            
                    
                    update
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="docs/api/batch.html">
            
                <a href="docs/api/batch.html">
            
                    
                    batch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="docs/api/external.html">
            
                <a href="docs/api/external.html">
            
                    
                    external
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="docs/tips/">
            
                <a href="docs/tips/">
            
                    
                    Tips
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="docs/tips/Persistence.html">
            
                <a href="docs/tips/Persistence.html">
            
                    
                    Persistence
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="docs/tips/Performance.html">
            
                <a href="docs/tips/Performance.html">
            
                    
                    Performance
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="docs/react/">
            
                <a href="docs/react/">
            
                    
                    React
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="docs/react/API.html">
            
                <a href="docs/react/API.html">
            
                    
                    API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="docs/react/ConnectorSelector.html">
            
                <a href="docs/react/ConnectorSelector.html">
            
                    
                    Connector/Selector
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="docs/react/ControlUpdate.html">
            
                <a href="docs/react/ControlUpdate.html">
            
                    
                    Control Update
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="docs/faq/">
            
                <a href="docs/faq/">
            
                    
                    FAQ
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="docs/faq/General.html">
            
                <a href="docs/faq/General.html">
            
                    
                    General
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="docs/faq/LimitationsPitfalls.html">
            
                <a href="docs/faq/LimitationsPitfalls.html">
            
                    
                    Limitations Pitfalls
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Introduction</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id=""><a name="" class="plugin-anchor" href="#"><i class="fa fa-link" aria-hidden="true"></i></a><a href="http://iflow.js.org" target="_blank"><img src="https://raw.githubusercontent.com/unadlib/iflow/master/assets/logo.png" height="60" alt="iFlow Logo" aria-label="iflow.js.org"></a></h1>
<p>iFlow is a concise &amp; powerful state management framework, iFlow has no dependencies and it&apos;s very small(5k).</p>
<p><a href="https://travis-ci.org/unadlib/iflow" target="_blank"><img src="https://img.shields.io/travis/unadlib/iflow.svg" alt="Travis"></a>
<a href="https://coveralls.io/github/unadlib/iflow?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/unadlib/iflow/badge.svg?branch=master" alt="Coverage Status"></a>
<a href="https://www.npmjs.com/package/iflow" target="_blank"><img src="https://img.shields.io/npm/v/iflow.svg" alt="npm"></a>
<a href="https://gitter.im/unadlib/iflow?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Join the chat at https://gitter.im/unadlib/iflow"></a></p>
<blockquote>
<p><a href="https://github.com/unadlib/iflow#implement-simple-todo-in-five-minutes" target="_blank">Implement simple todo in five minutes</a></p>
</blockquote>
<p>It&apos;s dynamic and extensible, you can directly use it to add, delete and reassign the state/action. It completely supports plain class and function based on <strong>mutable data structures</strong>, and be easy to OOP. If you use React, you need use <a href="https://github.com/unadlib/react-iflow" target="_blank">react-iflow</a> for the connector.</p>
<h3 id="features"><a name="features" class="plugin-anchor" href="#features"><i class="fa fa-link" aria-hidden="true"></i></a>Features</h3>
<ul>
<li><strong>&#x1F3AF;Plain class and function</strong> - Simple, Freestyle of the store structure for personal preference.</li>
<li><strong>&#x1F3EC;Store tree compose</strong> - Store tree be easy to store share the operating.</li>
<li><strong>&#x26A1;Dynamic and hot-swapping</strong> - Both the state and action can be directly and freely changed.</li>
<li><strong>&#x1F4A5;Async function and others type functions</strong> - Any actions will be composed or invoked internal.</li>
<li><strong>&#x1F680;Powerful middleware</strong> - Middleware can handle the store any change event.</li>
<li><strong>&#x1F525;Store support immutable</strong> - Store is supported to be processed into a immutable store.</li>
</ul>
<blockquote>
<p><a href="https://iflow.js.org/" target="_blank">Documents</a> / <a href="http://cn.iflow.js.org/" target="_blank">&#x4E2D;&#x6587;&#x6587;&#x6863;</a> </p>
</blockquote>
<h3 id="contents"><a name="contents" class="plugin-anchor" href="#contents"><i class="fa fa-link" aria-hidden="true"></i></a>Contents</h3>
<ul>
<li><a href="https://github.com/unadlib/iflow#features" target="_blank">Features</a></li>
<li><a href="https://github.com/unadlib/iflow#Installation" target="_blank">Installation</a></li>
<li><a href="https://github.com/unadlib/iflow#getting-started" target="_blank">Getting started</a><ul>
<li>State</li>
<li>Action</li>
<li>Data flow</li>
</ul>
</li>
<li><a href="https://github.com/unadlib/iflow#gist" target="_blank">Gist</a></li>
<li><a href="https://github.com/unadlib/iflow#implement-simple-todo-in-five-minutes" target="_blank">Implement simple todo in five minutes</a></li>
<li><a href="https://github.com/unadlib/iflow#examples" target="_blank">Examples</a></li>
<li><a href="https://github.com/unadlib/iflow#api-reference" target="_blank">API Reference</a></li>
<li><a href="https://github.com/unadlib/iflow#how-it-works" target="_blank">How it works</a></li>
<li><a href="https://github.com/unadlib/iflow#documentation" target="_blank">Documentation</a></li>
<li><a href="https://github.com/unadlib/iflow#benefits" target="_blank">Benefits</a></li>
<li><a href="https://github.com/unadlib/iflow#limitations-and-pitfalls" target="_blank">Limitations and pitfalls</a></li>
<li><a href="https://github.com/unadlib/iflow#support-and-compatibility" target="_blank">Support and compatibility</a></li>
<li><a href="https://github.com/unadlib/iflow#change-log" target="_blank">Change Log</a></li>
</ul>
<h3 id="getting-started"><a name="getting-started" class="plugin-anchor" href="#getting-started"><i class="fa fa-link" aria-hidden="true"></i></a>Getting started</h3>
<ul>
<li>State<blockquote>
<p>support all ECMAScript2015 data types except function, and state can be defined or assigned later.
```javascript
import iFlow from &apos;iflow&apos;</p>
</blockquote>
</li>
</ul>
<p>const pipe = iFlow({
  counter: 0,
})</p>
<pre><code>* Action
&gt; support all type functions, and dynamic insert action or remove it.If you use `function`, its function&apos;s `this` is the current self pipe store. If you ues `arrow function`, the last argument is the current `self` pipe store.
```javascript
import iFlow from &apos;iflow&apos;

const pipe = iFlow({
  calculate: function(number) {
    this.counter += number
  },
  counter: 0,
})
</code></pre><ul>
<li>Data flow<blockquote>
<p>View trigger function from <code>store</code> action, and run state&apos;s setter paths/value, then its setter paths was matched to the components&apos;s getter paths, finally decide whether to update
```javascript
import iFlow from &apos;iflow&apos;</p>
</blockquote>
</li>
</ul>
<p>const pipe = iFlow({
  calculate: function(number) {
    this.counter += number
  },
  counter: 0,
})</p>
<p>const store = pipe.create()</p>
<pre><code>```javascript
store.calculate(1)
console.log(store.counter) // console.log: 1
</code></pre><h3 id="installation"><a name="installation" class="plugin-anchor" href="#installation"><i class="fa fa-link" aria-hidden="true"></i></a>Installation</h3>
<pre><code class="lang-bash">yarn add iflow
//or
npm install --save iflow
</code></pre>
<p>If you want to use it completely, you may also need a connector for your Web view framework. For example, you used React and iFlow, and you should use <a href="https://github.com/unadlib/react-iflow" target="_blank">react-iflow</a> for the connector.</p>
<h3 id="gist"><a name="gist" class="plugin-anchor" href="#gist"><i class="fa fa-link" aria-hidden="true"></i></a>Gist</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> iFlow <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;iflow&apos;</span>

<span class="hljs-keyword">const</span> pipe = iFlow({
  calculate: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">number</span>) </span>{
    <span class="hljs-keyword">this</span>.counter += number
  },
  counter: <span class="hljs-number">0</span>,
})

pipe.addObserver((store) =&gt; {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`log &apos;[ store counter ]&apos;: `</span>, store.counter)
})

<span class="hljs-keyword">const</span> store = pipe.create({counter: <span class="hljs-number">1</span>})
store.calculate(<span class="hljs-number">1</span>)
</code></pre>
<h3 id="implement-simple-todo-in-five-minutes"><a name="implement-simple-todo-in-five-minutes" class="plugin-anchor" href="#implement-simple-todo-in-five-minutes"><i class="fa fa-link" aria-hidden="true"></i></a>Implement simple todo in five minutes</h3>
<p>1.First we finish quickly a TODO project configuration and basic NPM package dependencies.</p>
<pre><code class="lang-bash">mkdir example &amp;&amp; <span class="hljs-built_in">cd</span> example
yarn init -y
yarn add -D parcel-bundler babel-cli babel-preset-react babel-preset-env
yarn add react react-dom iflow react-iflow
</code></pre>
<p>2.Then we complete a Babel configuration file and an app portal file index.html</p>
<pre><code class="lang-bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&apos;{&quot;presets&quot;: [&quot;env&quot;,&quot;react&quot;]}&apos;</span> &gt; .babelrc
<span class="hljs-built_in">echo</span> <span class="hljs-string">&apos;&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;&lt;script src=&quot;./index.js&quot;&gt;&lt;/script&gt;&apos;</span> &gt; index.html
</code></pre>
<p>3.And then we complete a simple TODO</p>
<pre><code class="lang-bash">cat &lt;&lt;EOF &gt; index.js
import React from <span class="hljs-string">&apos;react&apos;</span>
import ReactDOM from <span class="hljs-string">&apos;react-dom&apos;</span>
import iFlow from <span class="hljs-string">&apos;iflow&apos;</span>
import flow from <span class="hljs-string">&apos;react-iflow&apos;</span>

const store = iFlow({
    todo: [],
    add(text){this.todo.push({text})},
    toggle(item){item.completed = !item.completed}
}).create()

const App = flow(store)(class extends React.Component {
    <span class="hljs-function"><span class="hljs-title">render</span></span>() {
        const {todo,add,toggle} = this.props.store
        <span class="hljs-built_in">return</span> (
            &lt;div&gt;
                &lt;input ref={(ref)=&gt;this.input=ref}/&gt;
                &lt;button onClick={()=&gt;{add(this.input.value);this.input.value=<span class="hljs-string">&apos;&apos;</span>}}&gt;Add&lt;/button&gt;
                &lt;ul&gt;
                    {todo.map((item,key)=&gt;(&lt;li key={key} style={item.completed?{textDecoration:<span class="hljs-string">&apos;line-through&apos;</span>}:{}} onClick={()=&gt;toggle(item)}&gt;{item.text}&lt;/li&gt;))}
                &lt;/ul&gt; 
            &lt;/div&gt;
        )
    }
})

ReactDOM.render(&lt;App/&gt;,document.getElementById(<span class="hljs-string">&apos;app&apos;</span>))
EOF
</code></pre>
<p>4.Finally we run up, hey!&#x1F389;&#x1F389;&#x1F389;</p>
<pre><code class="lang-bash">npx parcel index.html
</code></pre>
<h3 id="examples"><a name="examples" class="plugin-anchor" href="#examples"><i class="fa fa-link" aria-hidden="true"></i></a>Examples</h3>
<ul>
<li><a href="https://github.com/unadlib/iflow/tree/master/examples/counter" target="_blank">Counter</a>(<a href="https://jsfiddle.net/unadlib/03ukqj5L/" target="_blank">Online</a>)</li>
<li><a href="https://github.com/unadlib/iflow/tree/master/examples/todo" target="_blank">TODO</a>(<a href="https://jsfiddle.net/unadlib/6wabhdqp/" target="_blank">Online</a>)</li>
</ul>
<h3 id="api-reference"><a name="api-reference" class="plugin-anchor" href="#api-reference"><i class="fa fa-link" aria-hidden="true"></i></a>API Reference</h3>
<ul>
<li>iFlow<blockquote>
<p>It can handle data structures other than function.
```javascript
import iFlow from &apos;iflow&apos;</p>
</blockquote>
</li>
</ul>
<p>const pipe = iFlow({
  counter: 0,
  calculate (number) {
    this.counter += number
  }
})</p>
<pre><code>```javascript
import iFlow from &apos;iflow&apos;

class Count {
  constructor () {
    this.counter = 0
  }

  calculate (number) {
    this.counter += number
  }
}

const pipe = iFlow(new Count())
</code></pre><pre><code class="lang-javascript"><span class="hljs-keyword">import</span> iFlow <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;iflow&apos;</span>
<span class="hljs-keyword">const</span> pipe = iFlow([])
</code></pre>
<ul>
<li><p>middleware()</p>
<blockquote>
<p>The Middleware API will Listen to the store any change, and modify it.</p>
<pre><code class="lang-javascript">pipe.middleware({
  stateWillInitialize: (...args) =&gt; {},
  actionWillStart: (...args) =&gt; {},
  stateWillChange: (...args) =&gt; {},
  stateDidChange: (...args) =&gt; {},
  actionDidEnd: (...args) =&gt; {},
})
</code></pre>
</blockquote>
</li>
<li><p>The middleware tables are as follows:</p>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">APIs</th>
<th style="text-align:center">Direct API</th>
<th style="text-align:center">return</th>
<th style="text-align:center">return value</th>
<th style="text-align:center">Async</th>
<th style="text-align:right">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">stateWillInitialize</td>
<td style="text-align:center">setInitializeValue</td>
<td style="text-align:center">&#x2705;</td>
<td style="text-align:center">add initialized values</td>
<td style="text-align:center">&#x274C;</td>
<td style="text-align:right">Initialized</td>
</tr>
<tr>
<td style="text-align:left">actionWillStart</td>
<td style="text-align:center">addInterceptor</td>
<td style="text-align:center">&#x2705;</td>
<td style="text-align:center">action parameters</td>
<td style="text-align:center">&#x2705;</td>
<td style="text-align:right">Action forward</td>
</tr>
<tr>
<td style="text-align:left">stateWillChange</td>
<td style="text-align:center">addMiddleware</td>
<td style="text-align:center">&#x2705;</td>
<td style="text-align:center">a setter value</td>
<td style="text-align:center">&#x274C;</td>
<td style="text-align:right">State Change forward</td>
</tr>
<tr>
<td style="text-align:left">stateDidChange</td>
<td style="text-align:center">addObserver</td>
<td style="text-align:center">&#x274C;</td>
<td style="text-align:center">-</td>
<td style="text-align:center">&#x274C;</td>
<td style="text-align:right">State Change Notification</td>
</tr>
<tr>
<td style="text-align:left">actionDidEnd</td>
<td style="text-align:center">addListener</td>
<td style="text-align:center">&#x274C;</td>
<td style="text-align:center">-</td>
<td style="text-align:center">&#x2705;</td>
<td style="text-align:right">Action Notification</td>
</tr>
</tbody>
</table>
<ul>
<li><p>create()</p>
<blockquote>
<p>Every pipe will be created with initial value or without.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> store = pipe.create({
counter: <span class="hljs-number">100</span>,
})
</code></pre>
</blockquote>
</li>
<li><p>batch(action,...paths) / @batch(...paths)</p>
<blockquote>
<p>It will batch to update the states</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>No pass the paths arguments, then it will update the pipe store.</p>
</blockquote>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> pipe = iFlow({
  action: batch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">//state changes</span>
    <span class="hljs-keyword">this</span>.foo.push(<span class="hljs-number">1</span>)
    <span class="hljs-keyword">this</span>.foobar.bar.push(<span class="hljs-number">2</span>)
  })
})
</code></pre>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> pipe = iFlow({
  action: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    batch(()=&gt;{
      <span class="hljs-comment">//state changes</span>
      <span class="hljs-keyword">this</span>.foo.push(<span class="hljs-number">1</span>)
      <span class="hljs-keyword">this</span>.foobar.bar.push(<span class="hljs-number">2</span>)
    }, <span class="hljs-string">&apos;foo&apos;</span>, [<span class="hljs-string">&apos;foobar&apos;</span>,<span class="hljs-string">&apos;bar&apos;</span>]).call(<span class="hljs-keyword">this</span>)
  }
})
</code></pre>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Pipe</span> </span>{
  @batch(<span class="hljs-string">&apos;foo&apos;</span>, [<span class="hljs-string">&apos;foobar&apos;</span>,<span class="hljs-string">&apos;bar&apos;</span>])
  action(){
    <span class="hljs-comment">//state changes</span>
    <span class="hljs-keyword">this</span>.foo.push(<span class="hljs-number">1</span>)
    <span class="hljs-keyword">this</span>.foobar.bar.push(<span class="hljs-number">2</span>)
  }
}
<span class="hljs-keyword">const</span> pipe = iFlow(<span class="hljs-keyword">new</span> Pipe())
</code></pre>
<h3 id="how-it-works"><a name="how-it-works" class="plugin-anchor" href="#how-it-works"><i class="fa fa-link" aria-hidden="true"></i></a>How it works</h3>
<p><img src="https://raw.githubusercontent.com/unadlib/iflow/master/assets/flowChart.png" alt="Data Flow"></p>
<h3 id="documentation"><a name="documentation" class="plugin-anchor" href="#documentation"><i class="fa fa-link" aria-hidden="true"></i></a>Documentation</h3>
<p><a href="https://iflow.js.org" target="_blank">Online Documents</a></p>
<ul>
<li><a href="./">Introduction</a></li>
<li><a href="docs/basics/">Basics</a></li>
<li><a href="docs/advanced/">Advanced</a></li>
<li><a href="docs/api/">API</a></li>
<li><a href="docs/tips/">Tips</a></li>
<li><a href="docs/react/">React</a></li>
<li><a href="docs/faq/">FAQ</a></li>
</ul>
<h3 id="benefits"><a name="benefits" class="plugin-anchor" href="#benefits"><i class="fa fa-link" aria-hidden="true"></i></a>Benefits</h3>
<ul>
<li><strong>Keep the data structure primitive</strong></li>
</ul>
<p>iFlow because of the proxy mechanism, it retains the primitive nature of the data structure while supporting asynchronous functions as well as other types of functions, including, of course, ordinary classes and functions.</p>
<ul>
<li><strong>No boilerplate code</strong></li>
</ul>
<p>iFlow can give you more freedom to use it to implement a state data structure that is in line with the actual development needs, and not to have too many boilerplate code because of the limitations of various libraries.</p>
<ul>
<li><strong>Be easy to OOP</strong></li>
</ul>
<p>Sometimes when we need decoupled business code, we may need some object-oriented programming when design, so the State Library is better if it can support it.</p>
<ul>
<li><strong>As few selectors as possible</strong></li>
</ul>
<p>When using a web framework such as react, the corresponding connection library <a href="https://github.com/unadlib/react-iflow" target="_blank">react-iflow</a> allows you to write and manipulate as few selectors as possible.</p>
<ul>
<li><strong>Powerful middleware</strong></li>
</ul>
<p>If necessary, in fact iFlow&apos;s middleware is powerful and useful, and you can use it to implement a variety of coupled codes.</p>
<ul>
<li><strong>Composable and scalable store</strong></li>
</ul>
<p>iFlow advocates the store group to synthesize the store tree without worrying about the performance impact of the unrelated store, because it is dynamically matched and you can be assured of free combination and expansion of the store.</p>
<h3 id="limitations-and-pitfalls"><a name="limitations-and-pitfalls" class="plugin-anchor" href="#limitations-and-pitfalls"><i class="fa fa-link" aria-hidden="true"></i></a>Limitations and pitfalls</h3>
<ul>
<li><a href="https://github.com/unadlib/iflow/issues/3" target="_blank">No scheduler updates within automatic batch processing</a></li>
</ul>
<p>For the action of a normal synchronization process, the merge problem with the same state being changed multiple times is ignored and we will fix it.</p>
<ul>
<li><a href="https://github.com/unadlib/iflow/issues/2" target="_blank">Proxy/Reflect polyfill not supported</a></li>
</ul>
<p>Since IE11 does not support ES6 Proxy/Reflect, we will consider adding Proxy/Reflect polyfill to support IE11.</p>
<ul>
<li><a href="https://github.com/unadlib/iflow/issues/4" target="_blank">A prototype chain function injection of a primitive type that does not support native proxy cannot trigger notification of these types of change behavior automatically</a></li>
</ul>
<p>Currently known unsupported types are: <code>Set</code> / <code>WeakSet</code> / <code>Map</code> / <code>WeakMap</code>, and soon we will support it.</p>
<h3 id="support-and-compatibility"><a name="support-and-compatibility" class="plugin-anchor" href="#support-and-compatibility"><i class="fa fa-link" aria-hidden="true"></i></a>Support and compatibility</h3>
<table>
<thead>
<tr>
<th style="text-align:left">Browsers</th>
<th style="text-align:center">Chrome</th>
<th style="text-align:center">IE</th>
<th style="text-align:center">Edge</th>
<th style="text-align:center">FireFox</th>
<th style="text-align:center">Safari</th>
<th style="text-align:center">Opera</th>
<th style="text-align:center">Node</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Supported</td>
<td style="text-align:center">&#x2705;</td>
<td style="text-align:center">&#x274C;</td>
<td style="text-align:center">&#x2705;</td>
<td style="text-align:center">&#x2705;</td>
<td style="text-align:center">&#x2705;</td>
<td style="text-align:center">&#x2705;</td>
<td style="text-align:center">&#x2705;</td>
</tr>
<tr>
<td style="text-align:left">Version</td>
<td style="text-align:center">49+</td>
<td style="text-align:center">-</td>
<td style="text-align:center">12+</td>
<td style="text-align:center">18+</td>
<td style="text-align:center">10+</td>
<td style="text-align:center">36+</td>
<td style="text-align:center">6.4.0+</td>
</tr>
</tbody>
</table>
<h3 id="change-log"><a name="change-log" class="plugin-anchor" href="#change-log"><i class="fa fa-link" aria-hidden="true"></i></a>Change Log</h3>
<ul>
<li>Completed immutable store</li>
<li>Completed alpha version<h3 id="license"><a name="license" class="plugin-anchor" href="#license"><i class="fa fa-link" aria-hidden="true"></i></a>License</h3>
</li>
</ul>
<hr>
<p>MIT</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="docs/introduction/ConceptsPrinciples.html" class="navigation navigation-next navigation-unique" aria-label="Next page: Concepts Principles">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Introduction","level":"1.1","depth":1,"next":{"title":"Concepts Principles","level":"1.1.1","depth":2,"path":"docs/introduction/ConceptsPrinciples.md","ref":"docs/introduction/ConceptsPrinciples.md","articles":[]},"dir":"ltr"},"config":{"plugins":["github","edit-link","anchors","copy-code-button","github-buttons"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"github":{"url":"https://github.com/unadlib/iflow"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"github-buttons":{"repo":"unadlib/iflow","types":["star","fork"],"size":"small"},"copy-code-button":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"edit documents","base":"https://github.com/unadlib/iflow/tree/master/docs"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"iFlow Documents","gitbook":"3.2.2"},"file":{"path":"README.md","mtime":"2018-01-28T16:34:39.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2018-01-28T17:31:30.834Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

